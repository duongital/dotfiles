# Plugin Manager
# ===========================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'christoomey/vim-tmux-navigator'

# ===========================
# Theme - Tokyo Night
# ===========================
set -g @plugin 'janoamaral/tokyo-night-tmux'

# Tokyo Night theme customization
set -g @tokyo-night-tmux_window_id_style none
set -g @tokyo-night-tmux_pane_id_style hide
set -g @tokyo-night-tmux_zoom_id_style none
set -g @tokyo-night-tmux_show_datetime 0
set -g @tokyo-night-tmux_date_format MDD
set -g @tokyo-night-tmux_time_format 24H
set -g @tokyo-night-tmux_show_path hide # pwd
set -g @tokyo-night-tmux_path_format relative
set -g @tokyo-night-tmux_show_git 0
set -g @tokyo-night-tmux_show_netspeed 0
set -g @tokyo-night-tmux_show_wbg 1
set -g @tokyo-night-tmux_window_tidy_icons 0

# ===========================
# General Settings
# ===========================
# Enable mouse support
# set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Improve colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Increase scrollback buffer
set -g history-limit 10000

# Use vi mode in copy mode
setw -g mode-keys vi

# ===========================
# Key Bindings
# ===========================
# Split panes
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# Resize panes with vim-style keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Reload config easily
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Toggle mouse mode
bind m set -g mouse \; display "Mouse: #{?mouse,ON,OFF}"

# ===========================
# Plugin Settings
# ===========================
# tmux-continuum: auto-restore sessions
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

# tmux-resurrect: save vim/neovim sessions
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# Override window status to use same background for active/inactive tabs
# Show current directory instead of command
set -g window-status-current-format "#[fg=#73daca,bg=#1A1B26] â–¶ #[fg=#a9b1d6,bold,nodim]#I #{?#{==:#{b:pane_current_path},leetcode},***,#{b:pane_current_path}}#[nobold]#{?window_zoomed_flag,  ,}#{?window_last_flag, , }"
set -g window-status-format "#[fg=#a9b1d6,bg=#1A1B26] #I #{?#{==:#{b:pane_current_path},leetcode},***,#{b:pane_current_path}}#[nobold,dim]#{?window_zoomed_flag,  ,}#[fg=#e0af68]#{?window_last_flag, , }"

# Auto-rename windows to show current directory
set -g automatic-rename on
set -g automatic-rename-format '#{?#{==:#{b:pane_current_path},leetcode},***,#{b:pane_current_path}}'
